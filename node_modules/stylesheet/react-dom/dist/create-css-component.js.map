{"version":3,"sources":["../src/create-css-component.js"],"names":["module","exports","createCSSComponent","displayName","selector","className","attributes","attrs","base","invalidProps","props","state","then","setState","boundAttrs","nextProps","nextState","attr","cssRule","style","prop","template","value","key","map","filter","attribute","name","join"],"mappings":";;;;;;AAAA;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA;;;;;;;;AAQAA,OAAOC,OAAP,GAAiB,SAASC,kBAAT,OAQd;AAAA;;AAAA,MAPDC,WAOC,QAPDA,WAOC;AAAA,MANDC,QAMC,QANDA,QAMC;AAAA,MALDC,SAKC,QALDA,SAKC;AAAA,MAJDC,UAIC,QAJDA,UAIC;AAAA,MAHDC,KAGC,QAHDA,KAGC;AAAA,uBAFDC,IAEC;AAAA,MAFDA,IAEC,6BAFM,KAEN;AAAA,MADDC,YACC,QADDA,YACC;;AACD;AAAA;;AAOE,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA,8HACXA,KADW;;AAAA,YAJnBC,KAImB,GAJX;AACNJ,eAAO;AADD,OAIW;;AAEjB,sCAAiBA,KAAjB,EAAwBK,IAAxB,CAA6B;AAAA,eAAc,MAAKC,QAAL,CAAc,EAAEN,OAAOO,UAAT,EAAd,CAAd;AAAA,OAA7B;AAFiB;AAGlB;;AAVH;AAAA;AAAA,0CAYsBC,SAZtB,EAYiCC,SAZjC,EAY4C;AAAA;AAAA;AAAA;;AAAA;AACxC,+BAAmBA,UAAUT,KAA7B,8HAAoC;AAAA,gBAAzBU,IAAyB;;AAClC,gBAAIA,KAAKC,OAAT,EAAkB;AAChBD,mBAAKC,OAAL,CAAaC,KAAb,CAAmBF,KAAKG,IAAxB,IAAgC,sBAAOH,KAAKI,QAAZ,EAAsBN,SAAtB,CAAhC;AACD;AACF;AALuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMzC;AAlBH;AAAA;AAAA,+BAoBW;AAAA,YACCL,KADD,GACkB,IADlB,CACCA,KADD;AAAA,YACQC,KADR,GACkB,IADlB,CACQA,KADR;;AAEP,eAAO,0BAAcH,IAAd,eACF,mBAAOE,KAAP,EAAc,UAACY,KAAD,EAAQC,GAAR;AAAA,iBAAgBd,aAAac,GAAb,CAAhB;AAAA,SAAd,CADE;AAELlB,qBAAW,CACTA,SADS,4BAENM,MAAMJ,KAAN,CAAYiB,GAAZ,CAAgB;AAAA,mBAAQP,KAAKZ,SAAb;AAAA,WAAhB,CAFM,sBAGNC,WACAmB,MADA,CAEC;AAAA,mBAAaf,MAAMgB,UAAUC,IAAhB,KAAyB,8BAAeD,SAAf,EAA0BhB,MAAMgB,UAAUC,IAAhB,CAA1B,CAAtC;AAAA,WAFD,EAIAH,GAJA,CAII;AAAA,mBAAaE,UAAUrB,SAAvB;AAAA,WAJJ,CAHM,GAQTuB,IARS,CAQJ,GARI;AAFN,WAAP;AAYD;AAlCH;;AAAA;AAAA,8BACSzB,WADT,GACuBA,WADvB;AAoCD,CA7CD","file":"create-css-component.js","sourcesContent":["import { createElement, Component } from 'react';\nimport { format } from '../../core/template';\nimport matchAttribute from '../../core/match-attribute';\nimport bindAttrsToCSSOM from '../../dom/dist/bind-attrs-to-cssom';\nimport { omitBy } from './utils.js';\n\n/**\n * @param {string} displayName\n * @param {string} selector\n * @param {string} className\n * @param {Object} props\n * @param {Object} attrs\n * @param {Object} invalidProps\n */\nmodule.exports = function createCSSComponent({\n  displayName,\n  selector,\n  className,\n  attributes,\n  attrs,\n  base = 'div',\n  invalidProps,\n}) {\n  return class CSSComponent extends Component {\n    static displayName = displayName;\n\n    state = {\n      attrs: [],\n    };\n\n    constructor(props) {\n      super(props);\n      bindAttrsToCSSOM(attrs).then(boundAttrs => this.setState({ attrs: boundAttrs }));\n    }\n\n    componentWillUpdate(nextProps, nextState) {\n      for (const attr of nextState.attrs) {\n        if (attr.cssRule) {\n          attr.cssRule.style[attr.prop] = format(attr.template, nextProps);\n        }\n      }\n    }\n\n    render() {\n      const { props, state } = this;\n      return createElement(base, {\n        ...omitBy(props, (value, key) => invalidProps[key]),\n        className: [\n          className,\n          ...state.attrs.map(attr => attr.className),\n          ...attributes\n            .filter(\n              attribute => props[attribute.name] && matchAttribute(attribute, props[attribute.name])\n            )\n            .map(attribute => attribute.className),\n        ].join(' '),\n      });\n    }\n  };\n};\n"]}